<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilih Spesies - SPION</title>
    <link rel="stylesheet" href="spion-ui.css">
    <script src="theme-manager.js"></script>
</head>

<body>
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="dashboard-container">
        <nav class="top-bar animate-fade-in">
            <div class="brand-mini">
                <div class="logo-icon">
                    <div class="logo-icon">
                        <img src="assets/spion-logo.png" alt="SPION Logo">
                    </div>
                </div>
                <div style="display: flex; flex-direction: column;">
                    <h2>SPION</h2>
                    <p style="font-size: 0.65rem; color: rgba(255,255,255,0.7); margin: 0; line-height: 1.2;">Sistem
                        Pemeriksaan sensorI Organoleptik lapangaN</p>
                </div>
                <span style="margin: 0 10px; color: rgba(255,255,255,0.2);">|</span>
                <div style="margin-left: 0;">
                    <h2 id="jenisUjiTitle">Jenis Uji</h2>
                </div>
            </div>
            <div class="header-actions-modern">
                <button id="themeToggle" class="btn-logout-modern" style="margin-right: 15px;">ğŸŒ“ Mode</button>
                <div class="user-profile">
                    <a href="kuisoner-hasil-simpan.html" class="btn-logout-modern"
                        style="background:#607d8b; color:white; padding:8px 16px; border-radius:8px; text-decoration:none; margin-right:10px; display:inline-flex; align-items:center; justify-content:center;">ğŸ“
                        Hasil Simpan</a>
                    <span id="usernameDisplay">Admin</span>
                    <button class="btn-logout-modern" onclick="logout()">Logout</button>
                </div>
            </div>
        </nav>

        <header class="hero-section animate-fade-in" style="animation-delay: 0.1s;">
            <h1>Pilih Spesies</h1>
            <p>Silakan pilih jenis komoditas yang akan diuji untuk <span id="jenisUjiText"
                    style="color: var(--accent-blue); font-weight: 600;">...</span>.</p>
        </header>

        <div class="card-grid card-grid-5">
            <!-- Ikan Segar -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.2s;"
                onclick="goToForm('ikan-segar')">
                <div class="card-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">ğŸŸ</div>
                <h3>Ikan Segar</h3>
            </div>

            <!-- Ikan Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.3s;"
                onclick="goToForm('ikan-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">â„ï¸</div>
                <h3>Ikan Beku</h3>
            </div>

            <!-- Ikan Tuna Kaleng -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.4s;"
                onclick="goToForm('ikan-tuna-kaleng')">
                <div class="card-icon" style="background: linear-gradient(135deg, #ffecd2, #fcb69f);">ğŸ¥«</div>
                <h3>Ikan Tuna Kaleng</h3>
            </div>

            <!-- Sarden/Makarel Kaleng -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.5s;"
                onclick="goToForm('sarden-makarel-kaleng')">
                <div class="card-icon" style="background: linear-gradient(135deg, #fceabb, #f8b500);">ğŸ¥«</div>
                <h3>Sarden/Makarel Kaleng</h3>
            </div>

            <!-- Dried Smoking Fish -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.6s;"
                onclick="goToForm('ikan-asap')">
                <div class="card-icon" style="background: linear-gradient(135deg, #8e9eab, #eef2f3);">ğŸŸ</div>
                <h3>Dried Smoking Fish (Ikan Asap)</h3>
            </div>

            <!-- Ikan Asin Kering -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.7s;"
                onclick="goToForm('ikan-asin-kering')">
                <div class="card-icon" style="background: linear-gradient(135deg, #48c6ef, #6f86d6);">ğŸŸ</div>
                <h3>Ikan Asin Kering</h3>
            </div>

            <!-- Rumput Laut Kering -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.8s;"
                onclick="goToForm('rumput-laut-kering')">
                <div class="card-icon" style="background: linear-gradient(135deg, #11998e, #38ef7d);">ğŸŒ¿</div>
                <h3>Rumput Laut Kering</h3>
            </div>

            <!-- Lobster, Udang Kipas Hidup -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 0.9s;"
                onclick="goToForm('lobster-udang-kipas')">
                <div class="card-icon" style="background: linear-gradient(135deg, #ff416c, #ff4b2b);">ğŸ¦</div>
                <h3>LOBSTER, UDANG KIPAS HIDUP</h3>
            </div>

            <!-- Kepiting Bakau Hidup -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.0s;"
                onclick="goToForm('kepiting-bakau')">
                <div class="card-icon" style="background: linear-gradient(135deg, #FF512F, #DD2476);">ğŸ¦€</div>
                <h3>KEPITING BAKAU HIDUP</h3>
            </div>

            <!-- IKAN ASAP (New) -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.1s;"
                onclick="goToForm('ikan-asap-murni')">
                <div class="card-icon" style="background: linear-gradient(135deg, #536976, #292E49);">ğŸŒ«ï¸</div>
                <h3>IKAN ASAP</h3>
            </div>

            <!-- Sirip Hiu Kering dengan Kulit -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.2s;"
                onclick="goToForm('sirip-hiu-kering')">
                <div class="card-icon" style="background: linear-gradient(135deg, #2c3e50, #bdc3c7);">ğŸ¦ˆ</div>
                <h3>Sirip Hiu Kering dengan Kulit</h3>
            </div>

            <!-- Udang Kering Utuh -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.3s;"
                onclick="goToForm('udang-kering-utuh')">
                <div class="card-icon" style="background: linear-gradient(135deg, #ff6b6b, #feca57);">ğŸ¦</div>
                <h3>Udang Kering Utuh</h3>
            </div>

            <!-- Abon Ikan, Krustasea, dan Moluska -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.4s;"
                onclick="goToForm('abon-ikan')">
                <div class="card-icon" style="background: linear-gradient(135deg, #d4a373, #8b4513);">ğŸ¥˜</div>
                <h3>Abon Ikan, Krustasea, dan Moluska</h3>
            </div>

            <!-- Sambal Ikan -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.5s;"
                onclick="goToForm('sambal-ikan')">
                <div class="card-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">ğŸŒ¶ï¸</div>
                <h3>Sambal Ikan</h3>
            </div>

            <!-- Tuna Loin Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.6s;"
                onclick="goToForm('tuna-loin-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #2196F3, #00BCD4);">ğŸŸ</div>
                <h3>Tuna Loin Beku</h3>
            </div>

            <!-- Tuna Steak Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.7s;"
                onclick="goToForm('tuna-steak-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">ğŸ¥©</div>
                <h3>Tuna Steak Beku</h3>
            </div>

            <!-- Udang Segar -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.8s;"
                onclick="goToForm('udang-segar')">
                <div class="card-icon" style="background: linear-gradient(135deg, #FF9800, #F44336);">ğŸ¤</div>
                <h3>Udang Segar</h3>
            </div>

            <!-- Udang Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 1.9s;"
                onclick="goToForm('udang-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #1e3c72, #2a5298);">ğŸ¤</div>
                <h3>Udang Beku</h3>
            </div>

            <!-- Cumi-cumi Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 2.0s;"
                onclick="goToForm('cumi-cumi-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #6a11cb, #2575fc);">ğŸ¦‘</div>
                <h3>Cumi-cumi Beku</h3>
            </div>

            <!-- Gurita Mentah Beku -->
            <div class="glass glass-card test-card-compact animate-fade-in" style="animation-delay: 2.1s;"
                onclick="goToForm('gurita-mentah-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #11998e, #38ef7d);">ğŸ™</div>
                <h3>Gurita Mentah Beku</h3>
            </div>
        </div>
    </div>

    <script>
        // Cek autentikasi
        if (sessionStorage.getItem('isAuthenticated') !== 'true') {
            window.location.href = 'kuisoner-login.html';
        }

        // Ambil jenis uji dari URL
        const urlParams = new URLSearchParams(window.location.search);
        let jenisUji = urlParams.get('jenis');

        // Default ke 'organoleptik' jika tidak ada atau tidak valid
        if (!jenisUji || !['organoleptik', 'virologi', 'mikrobiologi'].includes(jenisUji)) {
            // alert('Jenis uji tidak valid! Defaulting to Organoleptik.'); // Optional debug
            jenisUji = 'organoleptik';
            // Update URL params without reload (optional aesthetic)
            const newUrl = new URL(window.location);
            newUrl.searchParams.set('jenis', 'organoleptik');
            window.history.replaceState({}, '', newUrl);
        }

        // Set judul berdasarkan jenis uji
        const jenisUjiNames = {
            'organoleptik': 'Uji Organoleptik',
            'virologi': 'Uji Virologi',
            'mikrobiologi': 'Uji Mikrobiologi'
        };

        document.getElementById('usernameDisplay').textContent = sessionStorage.getItem('username') || 'User';
        document.getElementById('jenisUjiTitle').textContent = jenisUjiNames[jenisUji];
        document.getElementById('jenisUjiText').textContent = jenisUjiNames[jenisUji];

        function goToForm(hewan) {
            window.location.href = `kuisoner-form.html?jenis=${jenisUji}&hewan=${hewan}`;
        }

        function goBack() {
            window.location.href = 'kuisoner-home.html';
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar?')) {
                sessionStorage.removeItem('isAuthenticated');
                sessionStorage.removeItem('username');
                window.location.href = 'kuisoner-login.html';
            }
        }
    </script>
</body>

</html>