<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilih Spesies - SPION</title>
    <link rel="stylesheet" href="spion-ui.css">
</head>

<body>
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="dashboard-container">
        <nav class="top-bar animate-fade-in">
            <div class="brand-mini">
                <div class="logo-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Eye (sight) -->
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                </div>
                <div style="display: flex; flex-direction: column;">
                    <h2>SPION</h2>
                    <p style="font-size: 0.65rem; color: rgba(255,255,255,0.7); margin: 0; line-height: 1.2;">Sistem
                        Pemeriksaan sensorI Organoleptik lapangaN</p>
                </div>
                <span style="margin: 0 10px; color: rgba(255,255,255,0.2);">|</span>
                <div style="margin-left: 0;">
                    <h2 id="jenisUjiTitle">Jenis Uji</h2>
                </div>
            </div>
            <div class="header-actions-modern">
                <div class="user-profile">
                    <a href="kuisoner-hasil-simpan.html" class="btn-logout-modern"
                        style="background:#607d8b; color:white; padding:8px 16px; border-radius:8px; text-decoration:none; margin-right:10px; display:inline-flex; align-items:center; justify-content:center;">üìÅ
                        Hasil Simpan</a>
                    <span id="usernameDisplay">Admin</span>
                    <button class="btn-logout-modern" onclick="logout()">Logout</button>
                </div>
            </div>
        </nav>

        <header class="hero-section animate-fade-in" style="animation-delay: 0.1s;">
            <h1>Pilih Spesies</h1>
            <p>Silakan pilih jenis komoditas yang akan diuji untuk <span id="jenisUjiText"
                    style="color: var(--accent-blue); font-weight: 600;">...</span>.</p>
        </header>

        <div class="card-grid">
            <!-- Ikan Segar -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.2s;"
                onclick="goToForm('ikan-segar')">
                <div class="card-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">üêü</div>
                <h3>Ikan Segar</h3>
                <p>Pengujian organoleptik untuk produk perikanan dalam kondisi segar/basah.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Ikan Beku -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.3s;"
                onclick="goToForm('ikan-beku')">
                <div class="card-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">‚ùÑÔ∏è</div>
                <h3>Ikan Beku</h3>
                <p>Pengujian organoleptik untuk produk perikanan yang telah dibekukan.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Ikan Tuna Kaleng -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.4s;"
                onclick="goToForm('ikan-tuna-kaleng')">
                <div class="card-icon" style="background: linear-gradient(135deg, #ffecd2, #fcb69f);">ü•´</div>
                <h3>Ikan Tuna Kaleng</h3>
                <p>Pengujian organoleptik khusus untuk produk tuna dalam kemasan kaleng (SNI 8223-2022).</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Sarden/Makarel Kaleng -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.5s;"
                onclick="goToForm('sarden-makarel-kaleng')">
                <div class="card-icon" style="background: linear-gradient(135deg, #fceabb, #f8b500);">ü•´</div>
                <h3>Sarden/Makarel Kaleng</h3>
                <p>Pengujian organoleptik untuk produk sarden atau makarel dalam kemasan kaleng.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Dried Smoking Fish -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.6s;"
                onclick="goToForm('ikan-asap')">
                <div class="card-icon" style="background: linear-gradient(135deg, #8e9eab, #eef2f3);">üêü</div>
                <h3>Dried Smoking Fish (Ikan Asap)</h3>
                <p>Pengujian organoleptik untuk produk ikan asap.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Ikan Asin Kering -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.7s;"
                onclick="goToForm('ikan-asin-kering')">
                <div class="card-icon" style="background: linear-gradient(135deg, #48c6ef, #6f86d6);">üêü</div>
                <h3>Ikan Asin Kering</h3>
                <p>Pengujian organoleptik untuk produk ikan asin kering.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Rumput Laut Kering -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.8s;"
                onclick="goToForm('rumput-laut-kering')">
                <div class="card-icon" style="background: linear-gradient(135deg, #11998e, #38ef7d);">üåø</div>
                <h3>Rumput Laut Kering</h3>
                <p>Pengujian organoleptik untuk produk rumput laut kering.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Lobster, Udang Kipas Hidup -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 0.9s;"
                onclick="goToForm('lobster-udang-kipas')">
                <div class="card-icon" style="background: linear-gradient(135deg, #ff416c, #ff4b2b);">ü¶û</div>
                <h3>LOBSTER, UDANG KIPAS HIDUP</h3>
                <p>Pengujian organoleptik untuk lobster dan udang kipas hidup.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>

            <!-- Kepiting Bakau Hidup -->
            <div class="glass glass-card test-card animate-fade-in" style="animation-delay: 1.0s;"
                onclick="goToForm('kepiting-bakau')">
                <div class="card-icon" style="background: linear-gradient(135deg, #FF512F, #DD2476);">ü¶Ä</div>
                <h3>KEPITING BAKAU HIDUP</h3>
                <p>Pengujian organoleptik untuk kepiting bakau hidup.</p>
                <div class="btn-start">Pilih ‚Üí</div>
            </div>
        </div>
    </div>

    <script>
        // Cek autentikasi
        if (sessionStorage.getItem('isAuthenticated') !== 'true') {
            window.location.href = 'kuisoner-login.html';
        }

        // Ambil jenis uji dari URL
        const urlParams = new URLSearchParams(window.location.search);
        let jenisUji = urlParams.get('jenis');

        // Default ke 'organoleptik' jika tidak ada atau tidak valid
        if (!jenisUji || !['organoleptik', 'virologi', 'mikrobiologi'].includes(jenisUji)) {
            // alert('Jenis uji tidak valid! Defaulting to Organoleptik.'); // Optional debug
            jenisUji = 'organoleptik';
            // Update URL params without reload (optional aesthetic)
            const newUrl = new URL(window.location);
            newUrl.searchParams.set('jenis', 'organoleptik');
            window.history.replaceState({}, '', newUrl);
        }

        // Set judul berdasarkan jenis uji
        const jenisUjiNames = {
            'organoleptik': 'Uji Organoleptik',
            'virologi': 'Uji Virologi',
            'mikrobiologi': 'Uji Mikrobiologi'
        };

        document.getElementById('usernameDisplay').textContent = sessionStorage.getItem('username') || 'User';
        document.getElementById('jenisUjiTitle').textContent = jenisUjiNames[jenisUji];
        document.getElementById('jenisUjiText').textContent = jenisUjiNames[jenisUji];

        function goToForm(hewan) {
            window.location.href = `kuisoner-form.html?jenis=${jenisUji}&hewan=${hewan}`;
        }

        function goBack() {
            window.location.href = 'kuisoner-home.html';
        }

        function logout() {
            if (confirm('Apakah Anda yakin ingin keluar?')) {
                sessionStorage.removeItem('isAuthenticated');
                sessionStorage.removeItem('username');
                window.location.href = 'kuisoner-login.html';
            }
        }
    </script>
</body>

</html>